define('text!vcl-comps/App.console.js', "$([\"App\",\"vcl/prototypes/App.console\"]);");
define('text!vcl-comps/App.js', "$([],{},[]);");
define('text!vcl-comps/App.v1.console.js', "$([\"App\",\"App.console\",\"App.v1\"]);");
define('text!vcl-comps/App.v1.js', "$([\"App\",\"vcl/prototypes/App.v1\"]);");
define('text!vcl-comps/devtools/App.js', "\"jquery, vcl/ui/Ace, js/Method\";var Ace=require(\"vcl/ui/Ace\");var Method=require(\"js/Method\");$([\"App.v1.console\"],{name:\"DevTools\",title:\"Code\",icon:\"images/favicon.ico\",onLoad:function(){Method.override(Ace.prototype,\"onnodecreated\",function(){var r=this.inherited(arguments);this._editor.commands.removeCommand(\"duplicateSelection\");return r;});var scope=this.scope();scope.client.setFormUri(\"devtools/Main\");this.on(\"workspace-persist\",function(evt){var workspace=evt.sender;});return this.inherited(arguments);},onGetStorageKey:function(forKey){}});");
define('text!vcl-comps/devtools/CtrlCtrl.js', "$(\"vcl/ui/Form\",{activeControl:\"input\",autoSize:\"both\",autoPosition:\"top-left-bottom-right\",css:{\"position\":\"absolute\",\"background-color\":\"rgba(255, 255, 255, 0.85)\",\"top\":\"120px\",\"width\":\"50%\",\"height\":\"64px\",\"margin-left\":\"25%\",\"margin-right\":\"25%\",\"z-index\":\"99999\",padding:\"8px\",\"box-shadow\":\"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 3px 0 rgba(0, 0, 0, 0.19)\",\"input\":{background:\"transparent\",border:\"none\",width:\"100%\",height:\"50px\",\"font-size\":\"16pt\",padding:\"3px 12px\"}},onActivate:function(){this.setVar(\"focused\",require(\"vcl/Control\").focused);},onDeactivate:function(){var control=this.getVar(\"focused\");control&&control.setFocus();},onLoad:function(){this.setParentNode(document.body);}},[$(\"vcl/ui/Input\",\"input\",{onKeyDown:function(evt){if(evt.keyCode===27){this._owner.hide();}},onBlur:function(){var me=this;this.setTimeout(function(){me._owner.hide();},200);}})]);");
define('text!vcl-comps/devtools/Editor$/console.js', "$([],{activeControl:\"console\",onLoad:function(){var tab=this.query(\"@owner\",require(\"vcl/ui/Tab\"));var scope=this.getScope();scope.console.on(\"show\",function(){scope.console.setFocus();});scope.console.loadHistory=function(){this._history=scope.ace.getValue().split(\"\\n\");this._history.index=this._history.length;};scope.console.saveHistory=function(text){var history=scope.ace.getValue().split(\"\\n\");if(history[history.length-1]!==text){history.push(text);scope.ace.getEditor().setValue(history.join(\"\\n\"));}};tab.on(\"resource-loaded\",function(){scope.console.loadHistory();});return this.inherited(arguments);},onActivate:function(){var scope=this.getScope();if(scope.ace.isVisible()){scope.ace.setFocus();}else{scope.console.setFocus();}\nreturn this.inherited(arguments);}},[$i(\"ace\",{visible:false}),$(\"vcl/Action\",\"toggle-source\",{hotkey:\"F6\",onExecute:function(){var scope=this.getScope();if(scope['source-tab'].isSelected()){scope['console-tab'].setSelected(true);}else{scope['source-tab'].setSelected(true);}}}),$(\"vcl/ui/Console\",\"console\",{css:\"background-color:white;\",align:\"client\"}),$(\"vcl/ui/Tabs\",\"tabs\",{align:\"bottom\",classes:\"bottom\",autoSize:\"height\"},[$(\"vcl/ui/Tab\",\"source-tab\",{text:\"Source\",control:\"ace\"}),$(\"vcl/ui/Tab\",\"console-tab\",{text:\"Console\",control:\"console\",selected:true})])]);");
define('text!vcl-comps/devtools/Editor$/html.js', "$([],{},[$i(\"ace\",{align:\"client\",onChange:function(){var scope=this.getScope();scope.preview.setContent(this.getValue());},onLoad:function(){var scope=this.scope();var uri=this.getVar(\"resource.uri\",true);if(uri.indexOf(\"vcl-comps/f7/Page$/\")!==-1){require([\"Framework7\",\"font-awesome\"]);scope.preview.addClass(\"f7-body\");}\nif(uri.indexOf(\"index.html\")!==-1){scope.preview.setVisible(false);}\nreturn this.inherited(arguments);}}),$(\"vcl/ui/Panel\",\"preview\",{align:\"right\",autoSize:\"width\",css:{\"background-color\":\"#f0f0f0\",\"border-left\":\"1px solid silver\",\"border-right\":\"1px solid silver\",\"width\":\"50%\"},visible:true})]);");
define('text!vcl-comps/devtools/Editor$/java.js', "$([\"devtools/Editor\"]);");
define('text!vcl-comps/devtools/Editor$/js.js', "$([\"devtools/Editor\"]);");
define('text!vcl-comps/devtools/Editor$/json.js', "$([\"devtools/Editor\"]);");
define('text!vcl-comps/devtools/Editor$/jsp.js', "$([\"devtools/Editor\"]);");
define('text!vcl-comps/devtools/Editor$/org.js', "$([\"devtools/Editor\"]);");
define('text!vcl-comps/devtools/Editor$/org/CHANGELOG.js', "$([\"devtools/Editor<org>\"]);");
define('text!vcl-comps/devtools/Editor$/vcl.js', "\"vcl/Factory, vcl/ui/Node, vcl/ui/Tab\";var Component=require(\"vcl/Component\");var Factory=require(\"vcl/Factory\");var Node=require(\"vcl/ui/Node\");var Tab=require(\"vcl/ui/Tab\");$([],{onLoad:function(){var tab=this.up(\"vcl/ui/Tab\");var scope=this.scope();var sourceUri=tab.getVar(\"resource.uri\",true);var uri=sourceUri.split(\".\");var ext=uri.pop(),index;uri=uri.join(\".\").split(\"/\");if((index=uri.indexOf(\"vcl-comps\"))!==-1){uri.splice(0,index+1);uri=uri.join(\"/\");if(uri.indexOf(\"$/\")!==-1){uri=uri.split(\"$\");uri=uri[0]+(\"<\"+uri.pop().substring(1)+\">\");}\nwhile((uri=Component.getImplicitBaseByUri(uri))!==null){var inh=new Tab(scope['@owner']);inh.setParent(scope.tabs);inh.setContent(String.format(\"%H\",uri));inh.setIndex(0);}}else{uri=uri.join(\"/\");}\nvar f=function(){if(!scope.host.isVisible()){return;}\nvar factory=new Factory(require,uri,sourceUri);var root=scope.host.getControls()[0];root&&root.hide();factory.load(scope.ace.getValue(),function(){try{root&&root.destroy();root=factory.newInstance(scope['@owner'],uri);if(root instanceof require(\"vcl/Control\")){root.setParent(scope.host);}}catch(e){alert(e.message);}},function(){root&&root.show();console.error(\">>>\",this,arguments);});}.bind(this);var app=this.getApp();var owners=app.qsa(\"*[uri=devtools/Workspace]:owner-of(.)\",this);tab.on({\"resource-loaded\":f,\"resource-saved\":f});var resource=this.getVar(\"resource\",true);var node=new Node(this);node.setText(resource.uri);node.setExpandable(true);node.setParent(scope.tree);return this.inherited(arguments);},onResize:function(){this.setTimeout(\"alignControls\",32);}},[$i(\"ace\",{align:\"left\",autoSize:\"width\",css:{width:\"650px\"}}),$(\"vcl/ui/Tabs\",\"tabs\",{align:\"bottom\",classes:\"bottom\",autoSize:\"height\",css:{\"padding-top\":\"2px\",\">div\":{\"margin-top\":\"2px\",\"border-top\":\"1px solid black\"}}},[$(\"vcl/ui/Tab\",{content:\"Source\",control:\"ace\",groupIndex:1,selected:true}),$(\"vcl/ui/Tab\",{content:\"Preview\",control:\"host\",groupIndex:-3})]),$(\"vcl/ui/Tree\",\"tree\",{align:\"client\",visible:false,css:{padding:\"8px\",\"background-color\":\"#f0f0f0\",\"border-left\":\"1px solid silver\",\"border-right\":\"1px solid silver\"},onNodesNeeded:function(parent){var owner=this._owner;for(var i=0;i<5;++i){var node=new Node(owner);node.setText(i);node.setExpandable(true);node.setParent(parent||this);}}}),$(\"vcl/ui/Panel\",\"host\",{align:\"client\",visible:false,css:{\"background-color\":\"#f0f0f0\",\"border-left\":\"1px solid silver\",\"border-right\":\"1px solid silver\"}})]);");
define('text!vcl-comps/devtools/Editor.js', "\"devtools/Resources, cavalion.org/util/Xml, vcl/ui/Tab\";var Resources=require(\"devtools/Resources\");$([\"ui/Form\"],{activeControl:\"ace\",onLoad:function(){var tab=this.up(\"vcl/ui/Tab\");var scope=this.getScope();var ExtensionToMode={\"html\":\"html\",\"css\":\"css\",\"scss\":\"scss\",\"json\":\"json\",\"js\":\"javascript\",\"vcl\":\"javascript\",\"java\":\"java\",\"jsx\":\"jsx\",\"xml\":\"xml\",\"xsl\":\"xml\",\"jsp\":\"jsp\"};var ed=scope.ace.getEditor();ed.setTheme(\"ace/theme/eclipse\");ed.renderer.setHScrollBarAlwaysVisible(false);ed.setScrollSpeed(2);var ext=(tab.getVar(\"resource.uri\")||\"\").split(\".\").pop();var session=ed.getSession();session.setMode(\"ace/mode/\"+(ExtensionToMode[ext||this.getSpecializer()]||(ext||\"js\")));session.setUseWrapMode(true);session.setWrapLimitRange(null,null);session.on(\"change\",function(e){scope.ace.setTimeout(\"update\",function(){var modified=tab.getVar(\"modified\");if(modified===\"resetundo,gototop\"){session.getUndoManager().reset();tab.removeVar(\"modified\");tab.setState(\"invalidated\",true);}else{if(session.getUndoManager().hasUndo()){if(!modified){tab.setVar(\"modified\",true);tab.setState(\"invalidated\",true);}}else{if(tab.getVar(\"modified\")!==undefined){tab.removeVar(\"modified\");tab.setState(\"invalidated\",true);}}}},100);});scope.refresh.execute();return this.inherited(arguments);}},[$(\"vcl/Action\",\"refresh\",{hotkey:\"MetaCtrl+R\",onExecute:function(evt){var scope=this.getScope();var tab=this.up(\"vcl/ui/Tab\");var resource=tab.getVar(\"resource\");var editor=scope.ace.getEditor();if(resource){scope.loading.show();editor.setReadOnly(true);editor.blur();Resources.get(resource.uri).addCallback(function(res){if(res.text!==editor.session.getValue()){tab.setVar(\"modified\",\"resetundo,gototop\");editor.session.setValue(res.text);}else{tab.removeVar(\"modified\");}\ntab.setVar(\"resource.revision\",res.revision);editor.setReadOnly(false);editor.focus();scope.loading.hide();tab.emit(\"resource-loaded\");}).addErrback(function(res){editor.setReadOnly(false);editor.focus();scope.loading.hide();tab.emit(\"resource-loaded\");console.error(res);});}}}),$(\"vcl/Action\",\"save\",{hotkey:\"MetaCtrl+S\",onExecute:function(){var scope=this.getScope();var resource=this.getVar(\"resource\",true);var text=scope.ace.getValue();var editor=scope.ace.getEditor();var tab=this.up(\"vcl/ui/Tab\");if(!resource.uri||!tab.getVar(\"modified\")){return;}\nscope.loading.show();editor.setReadOnly(true);editor.blur();resource.text=editor.getValue();Resources.update(resource.uri,resource).addBoth(function(res){editor.setReadOnly(false);editor.focus();scope.loading.hide();return res;}).addCallback(function(res){tab.removeVar(\"modified\");tab.setState(\"invalidated\",true);resource.revision=res.revision;tab.emit(\"resource-saved\");}).addErrback(function(err){alert(err.message);});}}),$(\"vcl/Action\",\"format\",{hotkey:\"MetaCtrl+Shift+F\",onExecute:function(){var Xml=require(\"cavalion.org/util/Xml\");var scope=this.getScope();var editor=scope.ace.getEditor();var mode=editor.session.$modeId||\"\";switch(mode.split(\"/\").pop()){case\"javascript\":case\"json\":editor.setValue(js.b(editor.getValue()));break;case\"xml\":editor.setValue(Xml.beautify(editor.getValue()));break;default:alert(\"Don't know how to format this (yet)\");}}}),$(\"vcl/Action\",\"evaluate\",{hotkey:\"MetaCtrl+Enter\",onExecute:function(){var all=require(\"js/JsObject\").all;var Deferred=require(\"js/Deferred\");function defer(requirements,callback){var deferred=new Deferred();require(requirements,function(){var args=[deferred].concat(js.copy_args(arguments));return callback.apply(this,args);});return deferred;}\nfunction pr(){scope['@app'].emit(\"print\",arguments);}\nvar scope=this.getScope();var text=scope.ace.getEditor().getSession().getValue();if(text.charAt(0)===\"{\"){text=\"(\"+text+\")\";}\ntry{var value=eval(text);if(value!==undefined){scope['@app'].emit(\"print\",value);}}catch(e){scope['@app'].emit(\"print\",e);}}}),$(\"vcl/Action\",\"focus-in-navigator\",{hotkey:\"MetaCtrl+48\",onExecute:function(evt){var app=this.getApp();app.qsa(\"devtools/Workspace<>:owner-of(.) #navigator #resource-focus\",this).execute({resource:this.getVar(\"resource\",true)},this);}}),$(\"vcl/ui/Ace\",\"ace\"),$(\"vcl/ui/Panel\",\"loading\",{align:\"none\",autoSize:\"both\",css:{opacity:\"0.75\",background:\"white url(/shared/vcl/images/loading.gif) no-repeat center center\",\"z-index\":\"10000\",left:0,top:0,bottom:0,right:0},visible:false,onLoad:function(){var canHide=Date.now();this.override({showNode:function(){this.clearTimeout(\"hideNode\");canHide=Date.now()+250;return this.inherited(arguments);},hideNode:function(){var me=this,args=js.copy_args(arguments);args.callee=arguments.callee;this.setTimeout(function(){me.inherited(args);},canHide-Date.now());}})}})]);");
define('text!vcl-comps/devtools/EditorsTabs.js', "\"vcl/ui/ListHeader\";$(\"vcl/ui/Form\",{activeControl:\"list\",onActivate:function(parent){this.scope(\"editors-array\").setArray(this.up(\"devtools/Workspace<>:root\").qsa(\"vcl/ui/Tab\").map(function(tab){var resource=tab.getVar(\"resource\");return!(resource&&resource.uri)?null:{name:resource.uri.split(\"/\").pop(),uri:resource.uri};}).filter(function(resource){return resource;}).sort(function(res1,res2){return res1.name<res2.name?-1:1;}));return this.inherited(arguments);}},[$(\"vcl/data/Array\",\"editors-array\",{}),$(\"vcl/Action\",\"editor-open\",{onExecute:function(evt){var list=this.scope('list');var a=this.up(\"devtools/Workspace<>:root\").down(\"#editor-needed\");list.getSelection(true).forEach(function(resource){a.execute({resource:resource,selected:true});},this);}}),$(\"vcl/Action\",\"search-focus\",{hotkey:\"MetaCtrl+191|Alt+F\",onExecute:function(){var scope=this.getScope();var previous=this.getVar(\"previous\");var now=Date.now();if(previous!==undefined&&now-previous<175){scope['search-input'].setValue(\"\");scope['search-input'].fire(\"onChange\",[true]);}\nscope['search-input'].setFocus(true);this.setVar(\"previous\",now);}}),$(\"vcl/Action\",\"search\",{onExecute:function(){var scope=this.getScope();var text=scope['search-input'].getInputValue();var lower=text.toLowerCase();var index=this._owner.getVar(\"index\");var exacts=[],lowers=[],names=[],uris=[];function sort(i1,i2){return i1.name<i2.name?-1:1;}\nfor(var k in index){index[k].forEach(function(item){item.uri=k?(k+\"/\"+item.name):item.name;if(item.name===text){exacts.push(item);}else if(item.name.toLowerCase()===lower){lowers.push(item);}else if(item.name.toLowerCase().indexOf(lower)!==-1){names.push(item);}else if((k+\"/\"+item.name).toLowerCase().indexOf(lower)!==-1){uris.push(item);}});}\nscope['editors-array'].setArray([exacts.sort(sort),lowers,names,uris].reduce(function(prev,curr){return prev.concat(curr.sort(sort));}));}}),$(\"vcl/ui/Panel\",\"search-panel\",{align:\"top\",autoSize:\"height\",css:\"padding: 4px 5px;\",visible:false},[$(\"vcl/ui/Input\",\"search-input\",{placeholder:\"search\",css:{width:\"100%\",border:\"1px solid silver\",padding:\"2px\",\"&.searching\":{\"background\":\"url(/shared/vcl/images/loading.gif) no-repeat 2px 2px\",\"background-position\":\"right 4px top 5px\"},\"&.value\":{\"background-color\":\"yellow\"}},onDblClick:function(){var scope=this.getScope();scope['search-list'].hide();this.setValue(\"\");},onFocus:function(){this.fire(\"onChange\",[!this.getInputValue()]);},onBlur:function(){this.fire(\"onChange\",[false]);},onChange:function(evt){var scope=this.getScope();var value=this.getInputValue();var hasChecking=scope.tree.hasClass(\"checking\");var hasValue=scope.tree.hasClass(\"value\");var should=typeof evt===\"boolean\"?evt:(this.isFocused()&&!value);scope['search-list'].setVisible(!!value);if(should&&!hasChecking){scope.tree.addClass(\"checking\");scope.tree.setTimeout(\"removeClass\",function(){scope.tree.removeClass(\"checking\");},2000);}else if(!should&&hasChecking){scope.tree.setTimeout(\"removeClass\",function(){scope.tree.removeClass(\"checking\");},100);}\nif(typeof evt!==\"boolean\"){scope.search.execute(evt);}}})]),$(\"vcl/ui/List\",\"list\",{align:\"client\",action:\"editor-open\",source:\"editors-array\",css:{\"background-color\":\"white\",\".{./ListHeader}\":{height:\"0\"},\".ListCell\":{\"margin-top\":\"1px\",\"padding-top\":\"5px\",\"padding-left\":\"34px\",\"background-repeat\":\"no-repeat\",\"background-position-x\":\"14px\",\"background-position-y\":\"1px\",\"&.file\":{\"background-image\":\"url(/shared/vcl/images/file16.png)\",},\"&.folder\":{\"background-image\":\"url(/shared/vcl/images/folder16.png)\",},\"span\":{\"font-size\":\"7.5pt\",color:\"silver\"}}},onLoad:function(){this._rowHeight=21;}},[$(\"vcl/ui/ListColumn\",{content:\"#\",attribute:\".\",onGetValue:function(value,row,source){return[String.format(\"%H <span> - %H</span>\",value.name,value.uri)];},onRenderCell:function(cell,value,column,row,source,orgValue){var classes=cell.className.split(\" \");if(classes.length===4){classes.pop();}\nclasses.push(orgValue.type===\"Folder\"?\"folder\":\"file\");cell.className=classes.join(\" \");}})])]);");
define('text!vcl-comps/devtools/Main.js', "\"js/Method, vcl/ui/Ace, vcl/ui/Panel, vcl/ui/Bar, cavalion.org/util/HotkeyManager\";var Ace=require(\"vcl/ui/Ace\");var Method=require(\"js/Method\");var HotkeyManager=require(\"cavalion.org/util/HotkeyManager\");var DefaultWorkspaces=[{name:\"devtools\",selected:true},{name:\"vcl\"},{name:\"veldapps.com\"},{name:\"Veldoffice/reports\"},{name:\"eae.com\"},{name:\"eae.com/BBT\"},{name:\"geoxplore.nl\"},{name:\"Vectorklic\"},{name:\"Playground\"},{name:\"consoles\"},{name:\"devtools/Editor\"},{name:\"leaflet\"}];function replaceChars(uri){return uri.replace(/[ \\\\\\/\\<\\>\\$\\#\\@\\!\\%\\^\\&\\*\\(\\)\\-\\=\\+\\{\\}\\[\\]\\:\\\"\\'\\;\\,\\.]/g,\"_\");}\nfunction forceUpdate(control){var ControlUpdater=require(\"vcl/ControlUpdater\");(function loop(c){ControlUpdater.queue(c);c._controls&&c._controls.forEach(loop);}(control));}\n$([\"ui/Form\"],{css:{\".{./Panel}[id$=-editors]\":{\"background-color\":\"silver\"},\".{./Bar}\":{\"&.gradient\":{\"background-image\":\"-webkit-gradient(linear, 0% 0%, 0% 100%, from(#F5F5F5), to(#E5E5E5))\",},\"background-color\":\"#f0f0f0\",'height':\"26px\",\"padding-top\":\"3px\",\"border-top\":\"1px solid silver\",\"&:not(.bottom)\":{\"border-bottom\":\"1px solid silver\"},\"&.bottom\":{\"padding-top\":\"0px\",\"border-top\":\"1px solid silver\"},\"&.sizeable\":{\"padding-right\":\"10px\",\"&.overflowing\":{\"padding-right\":\"24px\"},\".overflow_handler\":{right:\"4px\"}},\">[id$=-size_handle]\":{\"margin-top\":\"9px\"},\"&[id$=-tabs]\":{\".{./Tab}\":{display:\"inline-block\",border:\"1px solid transparent\",\"border-bottom\":\"none\",padding:\"2px 4px 2px 4px\",\"margin-left\":\"3px\",\"margin-right\":\"3px\",\"&.selected\":{\"background-color\":\"white\",\"border-color\":\"#a0a0a0\"},\"span.hashcode\":{\"font-size\":\"7pt\"}},\"&.bottom\":{\".{./Tab}\":{border:\"1px solid transparent\",\"border-top\":\"none\"}}}}},onLoad:function(){var scope=this.scope();var me=this;Method.override(Ace.prototype,\"onnodecreated\",function(){var r=this.inherited(arguments);this._editor.commands.removeCommand(\"duplicateSelection\");return r;});this.readStorage(\"workspaces\",function(value){if(value){value=JSON.parse(value);}else{value=DefaultWorkspaces;}\nvalue.forEach(function(workspace){scope[\"workspace-needed\"].execute({sender:this,workspace:workspace,selected:workspace.selected});},this);});this.readStorage(\"state\",function(state){if(state!==null){var index=JSON.parse(state).workspace;var tab=scope['workspaces-tabs'].getControl(index);tab&&tab.setSelected(true);}});this.on(\"state-dirty\",function(){me.setTimeout(\"saveState\",function(){me.writeStorage(\"state\",JSON.stringify({workspace:scope['workspaces-tabs'].getSelectedControl(1).getIndex()}));},200);});var console_scope=this.app().scope().console.scope();console_scope.toolbar.setVisible(false);console_scope.size_handle.setParent(scope['workspaces-tabs']);return this.inherited(arguments);},onActivate:function(){var shortcuts={\"Ctrl+Alt+F1\":\"editor-move-to-front\",\"Ctrl+N\":\"editor-new\",\"Alt+Ctrl+N\":\"editor-new\",\"Ctrl+Tab\":\"editor-next\",\"Shift+Ctrl+221\":\"editor-next\",\"Shift+Ctrl+Tab\":\"editor-previous\",\"Shift+Ctrl+219\":\"editor-previous\",\"Ctrl+W\":\"editor-close\"};var me=this;function create_callback(hotkey,action){return function(evt,type){evt.preventDefault();me.qsa(\"devtools/Workspace<>:root[selected=true] #\"+action).execute(evt);};}\nfunction create_callback_sidebar(hotkey,index){return function(evt,type){evt.preventDefault();var tabs=me.down(\"devtools/Workspace<>:root[selected=true]\").down(\"#left-sidebar-tabs\");tabs.getControl(index).setSelected(true);};}\nfunction create_callback_activateWS(hotkey,index){return function(evt,type){evt.preventDefault();me.scope()['workspaces-tabs'].getControl(index).setSelected(true);};}\nfor(var k in shortcuts){HotkeyManager.register(k,{type:\"keydown\",callback:create_callback(k,shortcuts[k])});}\nfor(var i=1;i<=9;++i){var hotkey=String.format(\"Meta+%d\",i+48);HotkeyManager.register(hotkey,{type:\"keydown\",callback:create_callback_activateWS(hotkey,i-1)});hotkey=String.format(\"Ctrl+Alt+%d\",i+48);HotkeyManager.register(hotkey,{type:\"keydown\",callback:create_callback_sidebar(hotkey,i)});}\nvar ctrlctrl=this.scope(\"ctrlctrl\");(function(focused){HotkeyManager.register({keyCode:17,type:\"keyup\",callback:function(evt){if(focused){if(ctrlctrl.getVisible())ctrlctrl.hide();else ctrlctrl.show();}else{focused=require(\"vcl/Control\").focused;me.setTimeout(\"ctrlctrl\",function(){focused=null;},250);}}});}());0&&(function(focused){HotkeyManager.register({keyCode:27,type:\"keyup\",callback:function(evt){if(focused){console.log(evt.keyCode,focused,evt);}else{focused=require(\"vcl/Control\").focused;me.setTimeout(\"escesc\",function(){focused=null;},250);}}});}());},onDeactivate:function(){}},[$([\"devtools/TabFactory\"],\"workspaces-new\",{vars:{parents:{tab:\"workspaces-tabs\",container:\"@owner\",owner:\"@owner\"}},onExecute:function(evt){if(!evt.hasOwnProperty(\"formUri\")){evt.formUri=evt.workspace.formUri||String.format(\"devtools/Workspace<%s>\",replaceChars(evt.workspace.name||\"\"));}\nevt.params=evt.workspace;var tab=this.inherited(arguments);tab.setVar(\"workspace\",evt.workspace);tab.setText(evt.workspace.name);return tab;}}),$(\"vcl/Action\",\"workspace-needed\",{onExecute:function(evt){var scope=this.getScope();var tabs=scope['workspaces-tabs'].getControls();var tab=tabs.find(function(tab){return tab.getVar(\"workspace.name\")===evt.workspace.name;});if(!tab){tab=scope['workspaces-new'].execute(evt);}else{tab.setSelected(true);}}}),$(\"vcl/Action\",\"workspace-activate\",{hotkey:[1,2,3,4,5,6,7,8,9].map(function(keyCode){return\"Ctrl+\"+(48+keyCode);}).join(\"|\"),onExecute:function(evt){var control,tabs=this.getScope()['workspaces-tabs'];if((control=tabs.getControl(evt.keyCode-49))!==null){evt.preventDefault();control.setSelected(true);}}}),$(\"vcl/Action\",\"workspaces-tabs::next-previous\",{hotkey:\"Ctrl+Alt+219|Ctrl+Alt+221\",onExecute:function(evt){var method=evt.keyCode===219?\"Previous\":\"Next\";this.scope(\"workspaces-tabs\")[\"select\"+method]();evt.preventDefault();}}),$(\"vcl/Action\",\"workspace-left-sidebar-tabs::next-previous\",{hotkey:\"Ctrl+32|Ctrl+Shift+32\",onExecute:function(evt){var tabs=this.up().down(\"devtools/Workspace<>:root[selected=true]\").down(\"#left-sidebar-tabs\");tabs[\"select\"+(evt.shiftKey?\"Previous\":\"Next\")]();evt.preventDefault();}}),$(\"vcl/Action\",\"F5-blocker\",{hotkey:\"F5|MetaCtrl+R\",onExecute:function(evt){evt.preventDefault();}}),$(\"vcl/ui/Tabs\",\"workspaces-tabs\",{align:\"bottom\",classes:\"bottom\",onChange:function(){var app=this.app();var selected=this.getSelectedControl(1);var title=this.getApp().getPropertyValue(\"title\");if(selected){title=[title,selected.getNode().childNodes[0].textContent].join(\" - \");}\napp.setTitle(title);this._owner.emit(\"state-dirty\");}}),$([\"devtools/CtrlCtrl<>\"],\"ctrlctrl\",{visible:false})]);");
define('text!vcl-comps/devtools/Navigator.js', "\"vcl/ui/Node, vcl/ui/ListHeader, devtools/NavigatorNode, devtools/Resources, js/Method\";var Method=require(\"js/Method\");var Resources=require(\"devtools/Resources\");var NavigatorNode=require(\"devtools/NavigatorNode\");$(\"vcl/ui/Form\",{activeControl:\"search-input\",onDispatchChildEvent:function(component,name,evt,f,args){if(name.indexOf(\"key\")===0){var scope=this.getScope();if(name.indexOf(\"key\")===0){if(component===scope['search-input']){if([13,27,33,34,38,40].indexOf(evt.keyCode)!==-1){var list=scope['search-list'];if(evt.keyCode===13&&list.getSelection().length===0&&list.getCount()){list.setSelection([0]);}else if(evt.keyCode===27){scope['search-input'].setValue(\"\");scope['search-input'].fire(\"onChange\",[true]);}\nif(list.isVisible()){list.dispatch(name,evt);}\nevt.preventDefault();}}}}\nreturn this.inherited(arguments);},onLoad:function(){var scope=this.scope();var me=this;this.readStorage(\"uris\",function(json){var indexing=0;var lists={};var index={};var uris=json?JSON.parse(json):[];me.setVar(\"index\",index);me.setVar(\"uris\",uris);me.setVar(\"Resources\",{index:function(){var run=++indexing;scope['search-input'].addClass(\"searching\");return Resources.index(uris).addCallback(function(res){if(run===indexing){for(var k in index){delete index[k];}\nfor(k in lists){if(lists[k].results[0]instanceof Array){index[k]=lists[k].results[0];}}\njs.mixIn(index,res);scope.search.execute();}\nscope['search-input'].removeClass(\"searching\");return res;}).addErrback(function(res){scope['search-input'].removeClass(\"searching\");return res;});},list:function(uri){lists[uri]=Resources.list(uri);return lists[uri].addCallback(function(res){return(index[uri]=res);});},refresh:function(uri){delete lists[uri];}});me.apply(\"Resources.index\");scope.tree.dispatch(\"nodesneeded\",null);});return this.inherited(arguments);}},[$(\"vcl/data/Array\",\"search-results\",{}),$(\"vcl/Action\",\"search-open\",{onExecute:function(evt){var list=this.scope('search-list');var a=this.up(\"devtools/Workspace<>:root\").down(\"#editor-needed\");list.getSelection(true).forEach(function(resource){a.execute({resource:resource,selected:true});},this);}}),$(\"vcl/Action\",\"search-focus\",{hotkey:\"MetaCtrl+191|Alt+F\",onExecute:function(){var scope=this.getScope();var previous=this.getVar(\"previous\");var now=Date.now();if(previous!==undefined&&now-previous<175){scope['search-input'].setValue(\"\");scope['search-input'].fire(\"onChange\",[true]);}\nscope['search-input'].setFocus(true);this.setVar(\"previous\",now);}}),$(\"vcl/Action\",\"search\",{onExecute:function(){var scope=this.getScope();var text=scope['search-input'].getInputValue();var lower=text.toLowerCase();var index=this._owner.getVar(\"index\");var exacts=[],lowers=[],names=[],uris=[];function sort(i1,i2){return i1.name<i2.name?-1:1;}\nfor(var k in index){index[k].forEach(function(item){item.uri=k?(k+\"/\"+item.name):item.name;if(item.name===text){exacts.push(item);}else if(item.name.toLowerCase()===lower){lowers.push(item);}else if(item.name.toLowerCase().indexOf(lower)!==-1){names.push(item);}else if((k+\"/\"+item.name).toLowerCase().indexOf(lower)!==-1){uris.push(item);}});}\nscope['search-results'].setArray([exacts.sort(sort),lowers,names,uris].reduce(function(prev,curr){return prev.concat(curr.sort(sort));}));}}),$(\"vcl/Action\",\"resource-focus\",{onExecute:function(evt){var scope=this.getScope();var names=evt.resource.uri.split(\"/\");var path=[];scope['search-list'].hide();function walk(parent){path.push(names.shift());var node=parent.getControls().find(function(node){return node.getVar(\"resource.uri\")===path.join(\"/\");});if(node){if(names.length){node.childNodesNeeded(function(){node.setExpanded(true);walk(node);});}else{scope.tree.setSelection([node]);scope.tree.makeVisible(node);}}else{alert(\"Could not find \"+evt.resource.uri);}}\nwalk(scope.tree);}}),$(\"vcl/Action\",\"resource-new\",{}),$(\"vcl/Action\",\"resource-delete\",{}),$(\"vcl/ui/Panel\",\"search-panel\",{align:\"top\",autoSize:\"height\",css:\"padding: 4px 5px;\"},[$(\"vcl/ui/Input\",\"search-input\",{placeholder:\"search\",css:{width:\"100%\",border:\"1px solid silver\",padding:\"2px\",\"&.searching\":{\"background\":\"url(/shared/vcl/images/loading.gif) no-repeat 2px 2px\",\"background-position\":\"right 4px top 5px\"},\"&.value\":{\"background-color\":\"yellow\"}},onDblClick:function(){var scope=this.getScope();scope['search-list'].hide();this.setValue(\"\");},onFocus:function(){this.fire(\"onChange\",[!this.getInputValue()]);},onBlur:function(){this.fire(\"onChange\",[false]);},onChange:function(evt){var scope=this.getScope();var value=this.getInputValue();var hasChecking=scope.tree.hasClass(\"checking\");var hasValue=scope.tree.hasClass(\"value\");var should=typeof evt===\"boolean\"?evt:(this.isFocused()&&!value);scope['search-list'].setVisible(!!value);if(should&&!hasChecking){scope.tree.addClass(\"checking\");scope.tree.setTimeout(\"removeClass\",function(){scope.tree.removeClass(\"checking\");},2000);}else if(!should&&hasChecking){scope.tree.setTimeout(\"removeClass\",function(){scope.tree.removeClass(\"checking\");},100);}\nif(typeof evt!==\"boolean\"){scope.search.execute(evt);}}})]),$(\"vcl/ui/Tree\",\"tree\",{css:{\"padding-left\":undefined,\"overflow-x\":undefined,\".{./Node}\":{\"&.seperator\":{\"border-top\":\"1px solid #f0f0f0\",\"margin-top\":\" 2px\",\"padding-top\":\"2px\"},\">.checkbox\":{position:\"absolute\",right:\"4px\",display:\"none\"},\">.icon\":{width:\"30px\",\"background-repeat\":\"no-repeat\",\"background-position-x\":\"right\",\"background-position-y\":\"2px\",},\"&.folder >.icon\":{\"background-image\":\"url(/shared/vcl/images/folder16.png)\",},\"&.file >.icon\":{\"background-image\":\"url(/shared/vcl/images/file16.png)\",},\">.text>.desc\":{\"font-size\":\"7.5pt\",color:\"silver\",\"pointer-events\":\"none\"},\"&.opaque\":{\">.checkbox\":{opacity:\"0.5\"}}},\"&.checking .{./Node}.folder >.checkbox\":{display:\"block\"},\"&.busy\":{background:\"url(/shared/vcl/images/loading.gif) no-repeat 50%,50%\",\".{./Node}\":{opacity:\"0.5\"}}},onDispatchChildEvent:function(component,name,evt,f,args){var resource,owner=this._owner;var app=this.app();var selection=this.getSelection();if(selection.length&&name===\"keydown\"){if(evt.keyCode===evt.KEY_DELETE||evt.keyCode===evt.KEY_F8){evt.preventDefault();app.confirm(String.format(\"You are about to delete the \"+\"following resource%s:\\n- %s\\n\\nAre you sure to continue?\",selection.length>1?\"s\":\"\",selection.map(function(node){return node.getVar(\"resource.uri\");}).join(\"\\n- \")),function(res){if(res===true){selection.forEach(function(node){node.setEnabled(false);node.setExpanded(false);node.getNode().style.opacity=\"0.5\";Resources['delete'](node.getVar(\"resource.uri\")).addCallback(function(){node.destroy();}).addErrback(function(err){node.setEnabled(true);node.getNode().style.opacity=\"\";});})}});}\nif(evt.keyCode===evt.KEY_INSERT||evt.keyCode===evt.KEY_F9){if(selection[0].getVar(\"resource.type\")===\"Folder\"){app.prompt(\"Enter uri for new resource:\",selection[0].getVar(\"resource.uri\")+\"/\",function(uri){if(uri!==null){Resources.create(uri,{text:\"\"}).addCallback(function(res){selection[0].reloadChildNodes();app.qsa(\"devtools/Workspace<>:owner-of(.) #editor-needed\",owner).execute({resource:{uri:uri},selected:true});}).addErrback(function(res){alert(res);});}});}}}\nif(name===\"dblclick\"&&(component.hasClass(\"file\")||evt.shiftKey===true)&&(resource=component.getVar(\"resource\"))){this.up(\"devtools/Workspace<>:root\").down(\"#editor-needed\").execute({resource:resource,selected:true});evt.preventDefault();return false;}\nif(name===\"click\"&&evt.target.nodeName===\"INPUT\"){var uris=this._owner.getVar(\"uris\");var uri=component.getVar(\"resource.uri\");var index=uris.indexOf(uri);var checked=component.getChecked();if(index!==-1&&!checked){uris.splice(index,1);}else{uris.push(uri);}\nthis._owner.writeStorage(\"uris\",JSON.stringify(uris));var me=this;this.setTimeout(\"refresh-index\",function(){me.apply(\"Resources.index\");},750);}\nif(this.hasClass(\"checking\")){var me=this;this.setTimeout(\"removeClass\",function(){me.removeClass(\"checking\");},2000);}},onNodesNeeded:function(parent){var owner=this._owner;var root=parent===null;parent=parent||this;var uri=parent.getVar(\"resource.uri\")||\"\";var control=parent.getVar(\"control\");var uris=this._owner.getVar(\"uris\").sort(function(i1,i2){return i1<i2?-1:1;});if(root){var uriNodes={};function createUriNode(uri){var node=new NavigatorNode(owner);var item={uri:uri,type:\"Folder\",name:uri.split(\"/\").pop()};root&&node.addClass(\"root\");node.setVar(\"resource\",item);node.setChecked(true);node.setExpandable(true);node.setParent(parent);return(uriNodes[uri]=node);}\nuris.forEach(createUriNode);Method.override(uris,{splice:function(index,count){for(var i=0;i<count;++i){var node=uriNodes[this[index+i]];node&&node.destroy();}\nreturn Method.callInherited(this,arguments);},push:function(){for(var i=0;i<arguments.length;++i){createUriNode(arguments[i]).setIndex(0);}\nreturn Method.callInherited(this,arguments);}});}\nvar r=this.apply(\"Resources.list\",[uri]).addCallback(function(res){res.forEach(function(item,index){var node=new NavigatorNode(owner);item.uri=uri!==\"\"?(uri+\"/\"+item.name):item.name;node.setVar(\"resource\",item);root&&node.addClass(\"root\");root===true&&index===0&&node.addClass(\"seperator top\");var checked=false;for(var i=0;i<uris.length&&!checked;++i){checked=uris[i].indexOf(item.uri)===0;}\nif(checked&&uris.indexOf(item.uri)===-1){node.addClass(\"opaque\");}\nnode.setChecked(checked);if(control){node.setVar(\"control\",control);}\nnode.setExpandable(item.type.indexOf(\"Folder\")!==-1);node.setParent(parent);});return res;});return r;}}),$(\"vcl/ui/List\",\"search-list\",{align:\"client\",action:\"search-open\",source:\"search-results\",visible:false,css:{\"background-color\":\"white\",\".{./ListHeader}\":{height:\"0\"},\".ListCell\":{\"margin-top\":\"1px\",\"padding-top\":\"4px\",\"padding-left\":\"34px\",\"background-repeat\":\"no-repeat\",\"background-position-x\":\"14px\",\"background-position-y\":\"1px\",\"&.file\":{\"background-image\":\"url(/shared/vcl/images/file16.png)\",},\"&.folder\":{\"background-image\":\"url(/shared/vcl/images/folder16.png)\",},\"span\":{\"font-size\":\"7.5pt\",color:\"silver\"}}},onLoad:function(){this._rowHeight=19;}},[$(\"vcl/ui/ListColumn\",{content:\"#\",attribute:\".\",onGetValue:function(value,row,source){return[String.format(\"%H <span> - %H</span>\",value.name,value.uri)];},onRenderCell:function(cell,value,column,row,source,orgValue){var classes=cell.className.split(\" \");if(classes.length===4){classes.pop();}\nclasses.push(orgValue.type===\"Folder\"?\"folder\":\"file\");cell.className=classes.join(\" \");}})])])");
define('text!vcl-comps/devtools/Outline.js', "\"vcl/ui/Node\";$(\"vcl/ui/Tree\",{css:{\".{./Node}\":{\"&:not(.selected) > .text > .class\":{color:\"silver\",\">a\":{color:\"rgba(0, 0, 255, 0.75)\"}},\"> .text > .class\":{\">a\":{\"font-size\":\"6.5pt\",\"text-decoration\":\"underline\",cursor:\"pointer\"}},\".root\":{\"font-weight\":\"bold\"}}},onLoad:function(){this.dispatch(\"nodesneeded\",null);return this.inherited(arguments);},onNodeCreated:function(){var app=this.getApp();var me=this;this._node.addEventListener(\"click\",function(e){if(e.target.nodeName===\"A\"){var uri=e.target.textContent;if(uri.charAt(0)!==\"#\"){uri+=\".js\";if(uri.indexOf(\"vcl/\")===0){uri=\"cavalion-vcl/lib/cavalion.org/\"+uri;}else{uri=\"code/src/vcl-comps/\"+uri;}\napp.qsa(\"devtools/Workspace<>:owner-of(.) #editor-needed\",me).execute({resource:{uri:uri},selected:true});}else{app.emit(\"print\",require(\"js/JsObject\").all[parseInt(uri.substring(1))]);}}});},onNodesNeeded:function(parent){var Node=require(\"vcl/ui/Node\");var owner=this;var arr;if(parent===null){arr=require(\"vcl/Component\").all.reduce(function(arr,item){if(item._isRoot){arr.push(item);}\nreturn arr;},[]);parent=this;}else{arr=parent.getVar(\"component\")._components||[];}\narr.forEach(function(comp){var node=new Node(owner);var className=comp.constructor['@class obj'].name;var name=comp._name;if(comp._isRoot){if(!(name=comp._name)){name=comp._uri;if(name.indexOf(\"<\")===-1){name+=\"<>\";}}}\nif(name){node.setText(String.format(\"<span class='name%s'>%H</span>\\\n                 <span class='class'>- <a>%H</a> - <a>%H</a> - <a>#%d</a></span>\",comp._isRoot?\" root\":\"\",name,className,comp._uri,comp.hashCode()));}else{node.setText(String.format(\"<span class='class'>- <a>%H</a> - <a>%H</a> - <a>#%d</a></span>\",className,comp._uri,comp.hashCode()));}\nnode.setVar(\"component\",comp);node.setParent(parent);node.setExpandable(comp._components);});}},[]);");
define('text!vcl-comps/devtools/TabFactory.js', "\"vcl/ui/FormContainer, vcl/ui/Tab\";var Tab=require(\"vcl/ui/Tab\");var FormContainer=require(\"vcl/ui/FormContainer\");function Tab_oncloseclick(){this._control._form?this._control._form.close():this.destroy();}\nfunction FormContainer_dispatchChildEvent(component,name,evt,f,args){if(name.indexOf(\"form\")===0&&name===\"formclose\"){component._owner.destroy();}\nreturn this.inherited(arguments);}\n$(\"vcl/Action\",{vars:{closeable:\"default for Tab.closeable if not specified in params\",parents:{container:\"reference to parent of to be created FormContainers\",tab:\"\"}},onExecute:function(evt){var scope=this.scope();var parents=js.mixIn(evt.parents||this.getVar(\"parents\"));var closeable=evt.closeable||this.getVar(\"closeable\");var formUri=evt.formUri||this.getVar(\"formUri\");for(var k in parents){if(typeof parents[k]===\"string\"){parents[k]=scope[parents[k]];}}\nvar tab=new Tab(evt.owner||scope['@owner']);var fc=new FormContainer(tab);tab.setCloseable(closeable);tab.setControl(fc);tab.setParent(parents.tab);tab.setOnCloseClick(Tab_oncloseclick);fc._onDispatchChildEvent=FormContainer_dispatchChildEvent;fc.setVisible(false);fc.setParent(parents.container);fc.setFormUri(formUri);evt.formParams&&fc.setFormParams(evt.formParams);evt.selected&&tab.setSelected(evt.selected);return tab;}});");
define('text!vcl-comps/devtools/Workspace$/Veldoffice_reports.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/consoles.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/devtools.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/devtools_Editor.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/eae_com.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/eae_com_BBT.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/vcl.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace$/veldapps_com.js', "$([\"devtools/Workspace\"]);");
define('text!vcl-comps/devtools/Workspace.js', "\"vcl/ui/FormContainer, vcl/ui/Tab, ace/range\";var Tab={render:function(){var text=this.getVar(\"resource.uri\")||\"New\";this.getNode().title=text;text=text.split(\"/\").pop();if(this.getVar(\"modified\")){text=\"*\"+text;}\nvar ace=this.qsa(\"vcl/ui/Ace\")[0];if(ace){text+=String.format(\" <span class='hashcode'>[%s]</span>\",ace.hashCode());}\nthis._nodes.text.innerHTML=text;}};var Utils={getState:function(scope){var tabs=scope[\"editors-tabs\"].getControls();return{editors:tabs.map(function(tab){var ace=tab.qsa(\"devtools/Editor<> #ace\")[0];var resource=tab.getVar(\"resource\")||{},r;if(ace){var ed=ace.getEditor();r={resource:{uri:resource.uri,type:resource.type},position:ed.selection.getCursor(),selection:ed.selection.toJSON(),options:ed.session.getOptions(),folds:ed.session.getAllFolds().map(function(fold){return{start:fold.start,end:fold.end,placeholder:fold.placeholder};}),scrollTop:ed.session.getScrollTop(),scrollLeft:ed.session.getScrollLeft()};}else{r=tab.getVar(\".state\");}\nr.selected=tab&&tab.getSelected();return r;})};},setState:function(state,scope){var Range=require(\"ace/range\").Range;var workspace=scope['@owner'];state&&state.editors&&state.editors.forEach(function(state){var _state=js.mixIn({},state);var tab=scope[\"editor-needed\"].execute(state);tab.setVar(\".state\",_state);tab.once(\"resource-loaded\",function(){var ace=tab._control._form.getScope().ace;setTimeout(function(){;var session=ace.getEditor().session;session.selection.fromJSON(state.selection);session.setOptions(state.options);state.mode&&session.setMode(state.mode);try{state.folds.forEach(function(fold){session.addFold(fold.placeholder,Range.fromPoints(fold.start,fold.end));});}catch(e){console.log(e.message);}\nsession.setScrollTop(state.scrollTop);session.setScrollTop(state.scrollLeft);ace.getEditor().gotoLine(state.position.row+1,state.position.column);},0);});});}};$([\"ui/Form\"],{onActivate:function(){this.getApp().setTimeout({name:\"devtools/Workspace<>.activate\",f:function(me){me.qsa([\"vcl/ui/Tab[uri=devtools/Workspace][selected=true]\",\"vcl/ui/Ace\"].join(\" \")).focus();},ms:200,args:[this]});this.setSelected(true);},onDeactivate:function(){this.setSelected(false);},onLoad:function(){var scope=this.getScope();this.readStorage(\"state\",function(value){Utils.setState(JSON.parse(value)||{},scope);});this.on(\"state-dirty\",function(){var workspace=scope['@owner'];workspace.setTimeout(\"saveState\",function(){workspace.writeStorage(\"state\",JSON.stringify(Utils.getState(workspace.getScope())));},200);});return this.inherited(arguments);}},[$([\"devtools/TabFactory\"],\"editor-factory\",{vars:{closeable:true,formUri:\"devtools/Editor<js>\",parents:{container:\"editors\",tab:\"editors-tabs\"}},onExecute:function(evt){var tab=this.inherited(arguments);var owner=tab.getOwner();tab.render=Tab.render;tab._control.once(\"formloaded\",function(){var ed=this._form.getScope().ace.getEditor();ed.selection.on(\"changeCursor\",function(e,thisObj){tab._owner.emit(\"state-dirty\");});ed.session.on(\"changeFold\",function(){tab._owner.emit(\"state-dirty\");});tab.render();this._form.setName(tab.getVar(\"resource.uri\"));});return tab;}}),$(\"vcl/Action\",\"editor-new\",{onExecute:function(evt){this.scope(\"editor-factory\").execute(evt).setSelected(true);}}),$(\"vcl/Action\",\"editor-needed\",{onExecute:function(evt){var scope=this.scope(),tab;if(!evt.parents){var tabs=scope['editors-tabs'].getControls();tab=tabs.find(function(tab){return tab.getVar(\"resource.uri\")===evt.resource.uri;});}\nif(!tab){if(!evt.formUri){var ext=(evt.resource.uri||\"\").split(\".\").pop();var path=evt.resource.uri?evt.resource.uri.split(\"/\"):[];if(evt.resource&&evt.resource.type===\"Folder\"){evt.formUri=\"devtools/Editor<folder>\";}else if(path.indexOf(\"vcl-comps\")!==-1&&ext===\"js\"){evt.formUri=\"devtools/Editor<vcl>\";}else{evt.formUri=String.format(\"devtools/Editor<%s>\",ext);}}\ntab=scope['editor-factory'].execute(evt,this);tab.setVar(\"resource\",evt.resource);tab.nodeNeeded();}else{if(evt.selected===true){tab.setSelected(true);}}\ntab.setIndex(0);return tab;}}),$(\"vcl/Action\",\"editor-next\",{onExecute:function(){var scope=this.getScope();scope['editors-tabs'].selectNext();}}),$(\"vcl/Action\",\"editor-previous\",{onExecute:function(){var scope=this.getScope();scope['editors-tabs'].selectPrevious();}}),$(\"vcl/Action\",\"editor-close\",{onExecute:function(evt){var scope=this.getScope();var selected=scope['editors-tabs'].getSelectedControl(1);if(selected){selected._control._form.close();}\nevt.preventDefault();}}),$(\"vcl/Action\",\"editor-move-to-front\",{onExecute:function(){this._owner.qs(\"vcl/ui/Tab:selected:childOf(editors-tabs)\").setIndex(0);}}),$(\"vcl/ui/Panel\",\"left-sidebar\",{align:\"left\",css:\"border-right: 1px solid gray;\",width:375},[$(\"vcl/ui/Tabs\",\"left-sidebar-tabs\",[$([[\"ui/controls/SizeHandle\"]],{classes:\"horizontal\",vars:{control:\"left-sidebar\"}}),$(\"vcl/ui/Tab\",{content:\"Navigator\",control:\"navigator\",selected:true}),$(\"vcl/ui/Tab\",{text:\"Recent Tabs\",control:\"editorsTabs\"}),$(\"vcl/ui/Tab\",{content:\"Outline\",control:\"outline\"}),$(\"vcl/ui/Tab\",{content:\"Inspector\",control:\"inspector-panel\"}),$(\"vcl/ui/Tab\",{content:\"Search\",control:\"search-panel\"})]),$([\"./Navigator\"],\"navigator\"),$([\"./Outline\"],\"outline\",{align:\"client\",visible:false}),$([\"./EditorsTabs\"],\"editorsTabs\",{visible:false}),$(\"vcl/ui/Panel\",\"search-panel\",{align:\"client\",visible:false}),$(\"vcl/ui/Panel\",\"inspector-panel\",{align:\"client\",visible:false})]),$(\"vcl/ui/Panel\",\"editors\",{align:\"client\"},[$(\"vcl/ui/Tabs\",\"editors-tabs\",{onChange:function(tab,previous){var title=this.app().getPropertyValue(\"title\");this.setTimeout(\"foo\",function(){if(tab){document.title=String.format(\"%s - %s\",tab.getVar(\"resource.uri\"),title);}else{document.title=title;}},0);this._owner.emit(\"state-dirty\");}})])]);");
define('text!vcl-comps/ui/Form.js', "$([\"vcl/prototypes/ui/Form\"]);");
define('text!vcl-comps/ui/controls/Toolbar.js', "$([\"vcl/prototypes/ui/controls/Toolbar\"]);");
define('text!vcl-comps/ui/forms/util/Console.js', "$([\"vcl/prototypes/ui/forms/util/Console\"]);");
define('text!vcl/prototypes/App.console.js', "$([],[$(\"vcl/Action\",\"toggle-console\",{hotkey:\"keyup:Ctrl+Shift+D|keydown:Ctrl+Shift+D|keyup:Alt+Shift+X|keydown:Alt+Shift+X|keyup:MetaCtrl+192\",onExecute:function(evt){var scope=this.getScope();var focused;if(evt.type===\"keydown\"){focused=require(\"vcl/Control\").focused;if(focused!==scope.console.getScope().console){this.setVar(\"focused\",focused);}}else{if(!scope.console.isVisible()){scope.console.show();}else{scope.console.hide();focused=this.removeVar(\"focused\");if(focused&&focused!==scope.console){this.setTimeout(\"focus\",function(){console.log(\"setFocus\",focused);focused.setFocus();},250);}}}\nreturn this.inherited(arguments);}}),$([\"ui/forms/util/Console\"],\"console\",{align:\"bottom\",height:250,visible:false,vars:\"parent: window;\"})]);");
define('text!vcl/prototypes/App.js', "$(\"vcl/Application\",{onLoad:function(){var img=document.body.childNodes[0];if(img.nodeName===\"IMG\"){img.parentNode.removeChild(img);}\nvar scope=this.scope(),delegate;scope.window.setParentNode(this.isDesigning()?scope.window.getDesigner().getParentNode():document.body);}},[$(\"vcl/ui/Panel\",\"window\",{align:\"client\"},[])]);");
define('text!vcl/prototypes/App.openform.js', "\"cavalion.org/util/Fullscreen, vcl/ui/Element, vcl/ui/FormContainer\";var FormContainer=require(\"vcl/ui/FormContainer\");$([],{onLoad:function(){var scope=this.scope(),delegate;this.on({\"open:form\":function(evt){if(evt.modal===true){scope.openform_modal.execute(evt);}else{if(delegate===undefined){delegate=scope.client.getForm().scope().open_form;}\ndelegate.execute(evt.uri,evt);}}});return this.inherited(arguments);},onMessage:function(name,msg,sender){var scope=this.getScope();if(name===\"openform\"||name===\"openform-tabbed\"){scope=scope.client.getForm().getScope();scope.open_form.execute(msg.uri,msg);}else if(name===\"openform_modal\"){scope.openform_modal.execute(msg,sender);}else if(name===\"log\"){scope.console.sendMessage(name,msg,sender);}},},[$(\"vcl/Action\",\"openform_modal\",{onExecute:function(evt){var app=this.getApp();var scope=this.getScope();var app_scope=app.getScope();var container=new FormContainer(app);var client=app_scope.modal_client;var cs=scope.modal_client.getComputedStyle();var w=evt.width||0.75;var h=evt.height||0.75;if(w<1){w=parseInt(cs.width)*w;}\nif(h<1){h=parseInt(cs.height)*h;}\nscope.modal_client.bringToFront();var width=parseInt(cs.width);container.setAlign(\"none\");container.setAutoSize(\"both\");container._autoPosition={left:true,top:true};container.setCss({\"background-color\":\"white\",\"z-index\":\"201\",\"border-radius\":\"12px\",\"border\":\"1px solid transparent\",\"box-shadow\":\"4px 4px 15px 2px rgba(128, 128, 128, 0.7)\",\"left\":String.format(\"%dpx\",width/2-w/2),\"top\":String.format(\"%dpx\",evt.top||70),\"width\":String.format(\"%dpx\",w),\"height\":String.format(\"%dpx\",h),\"&.animate\":{\"-webkit-transition-property\":\"-webkit-transform, opacity, all\",\"-webkit-transition-duration\":\"0.2s, 0.3s, 0.3s\",\"&.fadein-scale\":{\"-webkit-transform\":\"scale(1)\",\"opacity\":\"1\",\"&.initial\":{\"-webkit-transform\":\"scale(0.9)\",\"opacity\":\"0\"}}}});if(evt.uri){container.setFormUri(evt.uri);}else if(evt.form){container.swapForm(evt.form,false);evt.form.show();}\nif(typeof evt.params===\"function\"){container.setFormParams(evt.params());}else if(evt.params){container.setFormParams(evt.params);}\nclient.addClasses(\"animate darken initial\");container.addClasses(\"animate fadein-scale initial\");container.setParentNode(document.body);container.setOnFormClose(function(){client.applyVar(\"cancel\");});container.setOnFormLoad(function(){if(typeof evt.callback===\"function\"){evt.callback(this._form);}});container.setTimeout(\"x\",function(){client.removeClass(\"initial\",true);container.removeClass(\"initial\",true);},100);var containers=client.getVar(\"containers\",false,[]);containers.push(container);}}),$i(\"window\",[$(\"vcl/ui/Panel\",\"modal_client\",{css:{\"pointer-events\":\"none\",\"visibility\":\"hidden\",\"&.animate\":{\"-webkit-transition\":\"background-color 0.2s\",\"visibility\":\"inherit\",\"pointer-events\":\"all\",\"background-color\":\"white\",\"&.darken\":{opacity:\"0.6\",\"&.initial\":{opacity:\"0\"}}}},align:\"client\",onTap:function(){var containers=this.getVar(\"containers\");var scope=this.getScope();if(containers.length>0){var form=containers[containers.length-1]._form;if(form){form.close();}else{scope.modal_client.applyVar(\"cancel\");}}},onResize:function(){var containers=this.getVar(\"containers\");if(containers){var scope=this.getScope();var cw=parseInt(scope.modal_client.getComputedStyle().width);containers.forEach(function(container){var width=container.getWidth();container.setBounds(cw/2-width/2,undefined,undefined,undefined,undefined,undefined);});}},vars:{cancel:function(){var containers=this.getVar(\"containers\");var container=containers.pop();var modal_client=this;container.addClass(\"initial\",true);this.addClass(\"initial\",true);container.on({\"transitionend\":function(){modal_client.removeClasses(\"animate darken initial\",true);container._form.setParent(null);delete container._form;container.destroy();}});}}})])]);");
define('text!vcl/prototypes/App.openform.toast.js', "$([\"vcl/prototypes/App\",\"vcl/prototypes/App.toast\",\"vcl/prototypes/App.openform\"]);");
define('text!vcl/prototypes/App.toast.js', "$([],{onToast:function(options){var scope=this.getScope();var elem=new Element(this);var timeout=options.hasOwnProperty(\"timeout\")?options.timeout:1500;var content=options.content||\"No toast content\";var classes=options.classes||\"fade\";if(options.title!==undefined){content=String.format(\"<b>%s</b><div>%s</div>\",options.title,content);}\nelem.setContent(content);elem.setParent(scope.toasts);elem.addClasses(classes);elem.update(function(){elem.addClass(\"appear\");});var controller={element:elem,remove:function(timeout_){elem.setTimeout(\"disappear\",function(){var h=elem.on(\"transitionend\",function(){elem.un(h);elem.setParent(null);});elem.replaceClass(\"appear\",\"disappear\");},timeout_!==undefined?timeout_:timeout);}};if(timeout){controller.remove();}\nreturn controller;}},[$(\"vcl/ui/Panel\",\"toasts\",{parent:\"window\",autoSize:\"both\",autoPosition:\"top-left-bottom-right\",css:{\".right-half-size-switch\":{height:\"15px\",width:\"20px\",display:\"inline-block\",float:\"right\",transform:\"scale3d(0.5, 0.5, 1) translate3d(0, -9px, 0)\"},right:\"0\",left:\"0\",bottom:\"40px\",\"z-index\":\"20000\",font:\"10pt arial\",\"pointer-events\":\"none\",\".{./Element}\":{\"pointer-events\":\"all\",\"a\":{\"text-decoration\":\"underline\",cursor:\"pointer\"},\"background-color\":\"white\",opacity:\"0.75\",color:\"black\",padding:\"8px\",\"padding-bottom\":\"7px\",margin:\"4px\",\"float\":\"right\",\"clear\":\"both\",\"&.box-shadow\":{\"box-shadow\":\"0 1px 5px rgba(0,0,0,0.65)\",\"border-radius\":\"4px\"},\"&.no-clear\":\"clear: none;\",\"&.fade\":{opacity:\"0\",transition:\"opacity 1s ease\",},\"&.appear\":{opacity:\"1\"},\"&.disappear\":{},\"&:hover\":{opacity:\"1\"},\"&.loading-right\":{\"background-image\":\"url(/shared/vcl/images/loading.gif)\",\"background-position\":\"95% center\",\"background-repeat\":\"no-repeat\",\"padding-right\":\"32px\"},\"&.padding-right-20px\":{\"padding-right\":\"20px\"},}}})]);");
define('text!vcl/prototypes/App.v1.js', "\"cavalion.org/util/Fullscreen, vcl/ui/Element, vcl/ui/FormContainer\";var Fullscreen=require(\"cavalion.org/util/Fullscreen\");var Element=require(\"vcl/ui/Element\");var FormContainer=require(\"vcl/ui/FormContainer\");var HtmlElement=require(\"cavalion.org/util/HtmlElement\");$([\"./App.openform.toast\"],{onDispatchChildEvent:function(component,name,evt,f,args){if(name===\"touchstart\"){if(!Fullscreen.hasRequested()){Fullscreen.request(document.documentElement);}}\nreturn this.inherited(arguments);},onGetState:function(){var scope=this.getScope();var form=scope.client._form;if(form){return form.applyVar(\"App.getState\",[],\"silent\");}\nreturn{restore:function(){alert(\"?\");}};},onSetState:function(state){state&&state.restore&&state.restore(state);}},[$i(\"window\",[$(\"vcl/ui/FormContainer\",\"client\",{formUri:\"ui/forms/Portal<>\"}),])]);");
define('text!vcl/prototypes/devtools/CtrlCtrl.js', "$([\"devtools/CtrlCtrl\"]);");
define('text!vcl/prototypes/ui/Form.js', "\"vcl/ui/Button\";$(\"vcl/ui/Form\",{tabIndex:1,css:{\"background\":\"-webkit-linear-gradient(top, rgb(252, 252, 252) 0%, rgb(255, 255, 255) 50%, #fafafa 100%)\",\"font-family\":\"Apple Braille, Segoe UI, Lucida Grande, sans-serif\",\"font-size\":\"9pt\",\".{./Button}\":{\"font-family\":\"Apple Braille, Segoe UI, Lucida Grande, sans-serif\",\"font-size\":\"9pt\"}},onReceiveParams:function(params){var scope=this.getScope();if(params.canClose!==undefined){scope.form_close.setEnabled(params.canClose===true);scope.form_close.setVisible(params.canClose===true);}\nreturn this.inherited(arguments);}},[$(\"vcl/Action\",\"form_close\",{content:\"Close\",left:96,top:32}),$(\"vcl/Action\",\"url_state_push\",{left:96,top:72}),$(\"vcl/Action\",\"url_state_pop\",{left:96,top:112})]);");
define('text!vcl/prototypes/ui/controls/SizeHandle.js', "\"vcl/Dragger\";$(\"vcl/ui/Element\",{draggable:true,css:{position:\"absolute\",top:\"0\",right:\"0\",\"background-repeat\":\"no-repeat\",\"background-position\":\"center\",\"&.horizontal\":{\"background-image\":\"url(/shared/vcl/images/statusbarResizerHorizontal.png)\",cursor:\"ew-resize\",height:\"24px\",width:\"16px\"},\"&.vertical\":{\"background-image\":\"url(/shared/vcl/images/statusbarResizerVertical.png)\",cursor:\"ns-resize\",height:\"8px\",\"margin-top\":\"7px\",width:\"20px\"}},onLoad:function(){var control=this.getVar(\"control\");if(!(control instanceof require(\"vcl/Control\"))){var scope=this.getScope();this.setVar(\"control\",scope[control]||this);}else{console.log(\"skipped\");}\nreturn this.inherited(arguments);},onDraggerNeeded:function(){var control=this.getVar(\"control\");var dragger=new(require(\"vcl/Dragger\"))(this);var horizontal=this.hasClass(\"horizontal\");dragger.setCursor(horizontal?\"ew-resize\":\"ns-resize\");dragger.override({updateHandles:function(evt){if(horizontal===true){if(!control.getVisible()){control.setVisible(true);control.setWidth(0);}\ncontrol.setWidth(control.getWidth()+(evt.clientX-this._sx));}else{if(!control.getVisible()){control.setVisible(true);control.setHeight(0);}\ncontrol.setHeight(control.getHeight()-(evt.clientY-this._sy));}\nthis._sx=evt.clientX;this._sy=evt.clientY;}});return dragger;}});");
define('text!vcl/prototypes/ui/controls/Toolbar.js', "$(\"vcl/ui/Panel\",{align:\"top\",height:23,css:{\"background-color\":\"#f0f0f0\",\"border-bottom\":\"1px solid silver\",overflow:\"hidden\"}});");
define('text!vcl/prototypes/ui/forms/util/Console.js', "\"vcl/Component, vcl/Control, vcl/Dragger, cavalion.org/Command, cavalion.org/util/HotkeyManager, vcl/ui/Sizer, vcl/ui/FormContainer, entities/EM, entities/ExpressionBuilder, cavalion.org/util/Rest, features/FM\";var Component=require(\"vcl/Component\");var Control=require(\"vcl/Control\");var FormContainer=require(\"vcl/ui/FormContainer\");var Sizer=require(\"vcl/ui/Sizer\");var Command=require(\"cavalion.org/Command\");var Rest=require(\"cavalion.org/util/Rest\");var EM=require(\"entities/EM\");var FM=require(\"features/FM\");var Deferred=require(\"js/Deferred\");var JsObject=require(\"js/JsObject\");var Dragger=require(\"vcl/Dragger\");$([\"ui/Form\"],{activeControl:\"console\",align:\"bottom\",height:250,visible:true,css:\"background-color: white border-top: 1px solid silver z-index: 10000\",onMessage:function(name,params,sender){var scope=this.getScope();if(name===\"log\"){console.warn(\"onMessage will be deprecated, migrate code to Component.prototype.emit and Component.prototype.query[All]\");var args=js.copy_args(params);var source=params[0];if(typeof source!==\"string\"){source=\"[source-unknown]\";}else{args.shift();}\nscope.console.print.apply(scope.console,[String.format(\"%n - %s\",sender,source)].concat(args));return true;}\nreturn this.inherited(arguments);},onActivate:function(){this._vars.sizer.setControl(null);},onLoad:function(){var me=this;var scope=this.getScope();var sizer=this.setVar(\"sizer\",new Sizer(this));var app=this.getApp();app.on(\"print\",function(){scope.console.print.apply(scope.console,arguments);});var parent=this.scope()[this.getVar(\"parent\")];if(parent){this.setParent(parent);}\ndocument.body.style.overflow=\"hidden\";sizer.on(\"setControl\",function(value){var content=[];if(value!==null){scope.console.getNode(\"input\").value=String.format(\"#%d\",value.hashCode());content.push(String.format(\"%n\",value));if(value.getUri()){content.push(value.getUri());}\nif(value._owner){content.push(String.format(\"%n\",value._owner));}}\nscope.sizer_selection.setContent(String.format(\"%H\",content.join(\" - \")));},true);var down;app._dispatcher.override({dispatch:function(component,name,evt){if(evt.keyCode===27){if(sizer._control!==null){if(name===\"keydown\"){down=Date.now();sizer.setControl(sizer._control._parent);}\nif(name===\"keyup\"){return false;}}}\nif(name===\"dblclick\"&&evt.altKey===true){}else if(name===\"click\"&&evt.altKey===true){if(evt.shiftKey===false){me.show();if(component instanceof Control){if(sizer._control===component){component=null;}\nsizer.setControl(component);return false;}}else{var fc=component;while(fc instanceof Control){if(fc instanceof FormContainer){if(evt.metactrlKey===true){var keys=Component.getKeysByUri(fc._formUri);if(confirm(String.format(\"Rescaffold %s?\",fc.getForm().getUri()))===true){fc.reloadForm();return false;}}else{if(confirm(String.format(\"Reload %s?\",fc.getForm().getUri()))===true){fc.reloadForm();return false;}}}\nfc=fc._parent;}}}else if(name===\"touchstart\"||name===\"touchmove\"){if(evt.touches.length>3){app.getScope().toggle_console.execute(evt);}}\nreturn this.inherited(arguments);}});return this.inherited(arguments);},onHide:function(){var focused=Control.focused;var scope=this.getScope();if(focused===scope.console){scope.console.getNode(\"input\").blur();}}},[$([\"ui/controls/Toolbar\"],\"toolbar\",{css:{cursor:\"ns-resize\"},draggable:true,onDraggerNeeded:function(){var control=this._owner;var dragger=new Dragger(this);dragger.setCursor(\"ns-resize\");dragger.override({updateHandles:function(evt){control.setHeight(control.getHeight()-(evt.clientY-this._sy));this._sy=evt.clientY;}});return dragger;}},[$(\"vcl/ui/Element\",\"sizer_selection\",{css:\"padding: 4px; display: inline-block; cursor: default;\"}),$([[\"ui/controls/SizeHandle\"]],\"size_handle\",{classes:\"vertical\",vars:{control:\"@owner\"}})]),$(\"vcl/ui/Console\",\"console\",{onLoad:function(){this.print(\"loaded\",this);},onEvaluate:function(expr){var scope=this.getScope();var app=this._owner._owner;var pr=this.print.bind(this);function req(){if(arguments.length==1){try{return require(arguments[0]);}catch(e){}}\nvar d=new Deferred();require.apply(this,[js.copy_args(arguments),function(){d.callback.apply(d,js.copy_args(arguments));},function(err){d.errback(err);}]);return d;}\nfunction d(deferred){return deferred.addCallback(function(res){pr(res);return res;});}\nvar me=this;function open(uri,opts){me.bubble(\"openform\",js.mixIn(js.mixIn(opts||{}),{uri:uri}));}\nfunction runAtServer(c,params,content){return Command.execute(c,params,content);}\nif(expr.charAt(scope||Documents||0)===\":\"){expr=expr.substring(1).split(\" \");if(expr.length>0){expr=String.format(\"Utils.%s(scope, %s)\",expr.shift(),expr.join(\" \"));}else{expr=String.format(\"Utils.%s(scope)\",expr.shift());}}\nif(expr===\"@!\"){expr=\"@ reset()\";}\nif(expr.substring(0,1)===\"@\"){if(expr.substring(0,2)===\"@(\"){expr=\"runAtServer(\"+expr.substring(2);}else{expr=String.format(\"runAtServer(\\\"scaffold.js/lib/eval\\\", %s);\",JSON.stringify({text:expr.substring(1)}));}}\nreturn eval(expr);}})]);");